{"version":3,"sources":["task16.coffee"],"names":[],"mappings":";AAAA;;;;;;;AAAA,IAAA;;AAOA,OAAA,GAAU;;;AAEV;;;;AAGA,UAAA,GAAa,SAAA;AACX,MAAA;EAAA,SAAA,GAAY,QAAQ,CAAC,cAAT,CAAwB,gBAAxB,CAAyC,CAAC,KAAK,CAAC,IAAhD,CAAA;EACZ,UAAA,GAAa,QAAQ,CAAC,cAAT,CAAwB,iBAAxB,CAA0C,CAAC,KAAK,CAAC,IAAjD,CAAA;EAEb,IAAG,CAAI,0BAA0B,CAAC,IAA3B,CAAgC,SAAhC,CAAP;IACE,KAAA,CAAM,aAAN;IACA,QAAQ,CAAC,cAAT,CAAwB,gBAAxB,CAAyC,CAAC,KAA1C,CAAA;AACA,WAHF;;EAKA,IAAG,CAAI,OAAO,CAAC,IAAR,CAAa,UAAb,CAAP;IACE,KAAA,CAAM,SAAN;IACA,QAAQ,CAAC,cAAT,CAAwB,iBAAxB,CAA0C,CAAC,KAA3C,CAAA;AACA,WAHF;;SAKA,OAAQ,CAAA,SAAA,CAAR,GAAqB;AAdV;;AAiBb,aAAA,GAAgB,SAAA;AACd,MAAA;EAAA,GAAA,GAAM,QAAQ,CAAC,cAAT,CAAwB,WAAxB;EACN,UAAA,GAAa;EACb,UAAU,CAAC,IAAX,CAAgB,oDAAhB;AACA,OAAA,oBAAA;;IACE,UAAU,CAAC,IAAX,CAAgB,MAAhB;IACA,UAAU,CAAC,IAAX,CAAgB,MAAA,GAAO,SAAP,GAAiB,WAAjB,GAA4B,UAA5B,GAAuC,OAAvD;IACA,UAAU,CAAC,IAAX,CAAgB,wBAAA,GAAyB,SAAzB,GAAmC,mBAAnD;IACA,UAAU,CAAC,IAAX,CAAgB,OAAhB;AAJF;SAKA,GAAG,CAAC,SAAJ,GAAgB,UAAU,CAAC,IAAX,CAAgB,EAAhB;AATF;;AAahB,YAAA,GAAe,SAAA;EACb,UAAA,CAAA;SACA,aAAA,CAAA;AAFa;;AAOf,YAAA,GAAe,SAAC,SAAD;EACb,OAAO,OAAQ,CAAA,SAAA;SACf,aAAA,CAAA;AAFa;;AAIf,IAAA,GAAO,SAAA;AAGL,MAAA;EAAA,QAAQ,CAAC,cAAT,CAAwB,SAAxB,CAAkC,CAAC,OAAnC,GAA6C;EAC7C,GAAA,GAAM,QAAQ,CAAC,cAAT,CAAwB,WAAxB;SAIN,GAAG,CAAC,gBAAJ,CAAqB,OAArB,EAA8B,SAAC,KAAD;IAC5B,IAAG,KAAK,CAAC,MAAM,CAAC,QAAb,KAAyB,QAAzB,IAAsC,KAAK,CAAC,MAAM,CAAC,SAAb,KAA0B,IAAnE;aACE,YAAA,CAAa,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,IAAlC,EADF;;EAD4B,CAA9B,EAGE,KAHF;AARK;;;AAaP;;;;AAGA,MAAM,CAAA,SAAE,CAAA,IAAR,GAAe,SAAA;SACb,IAAI,CAAC,OAAL,CAAa,iBAAb,EAAgC,EAAhC;AADa;;AAGf,IAAA,CAAA","file":"task16.js","sourceRoot":"/source/","sourcesContent":["### aqiData，存储用户输入的空气指数数据\r\n# 示例格式：\r\n# aqiData = {\r\n#    \"北京\": 90,\r\n#    \"上海\": 40\r\n# };\r\n###\r\naqiData = {}\r\n\r\n###\r\n# 从用户输入中获取数据，向aqiData中增加一条数据\r\n###\r\naddAqiData = ->\r\n  city_name = document.getElementById('aqi-city-input').value.trim()\r\n  city_value = document.getElementById('aqi-value-input').value.trim()\r\n\r\n  if not /^[\\u4e00-\\u9fa5a-zA-Z]+$/.test(city_name)\r\n    alert('请输入正确的城市名称!')\r\n    document.getElementById('aqi-city-input').focus()\r\n    return\r\n\r\n  if not /^\\d+$/.test(city_value)\r\n    alert('请输入正整数!');\r\n    document.getElementById('aqi-value-input').focus();\r\n    return\r\n\r\n  aqiData[city_name] = city_value\r\n\r\n# 渲染aqi-table表格\r\nrenderAqiList = ->\r\n  tab = document.getElementById('aqi-table')\r\n  tabContent = []\r\n  tabContent.push '<thead><td>城市</td><td>空气质量</td><td>操作</td></thead>'\r\n  for city_name,city_value of aqiData\r\n    tabContent.push \"<tr>\"\r\n    tabContent.push \"<td>#{city_name}</td><td>#{city_value}</td>\"\r\n    tabContent.push \"<td><button data-city=#{city_name}>删除</button></td>\"\r\n    tabContent.push \"</tr>\"\r\n  tab.innerHTML = tabContent.join('')\r\n\r\n# 点击add-btn时的处理逻辑\r\n# 获取用户输入，更新数据，并进行页面呈现的更新\r\naddBtnHandle = ->\r\n  addAqiData()\r\n  renderAqiList()\r\n\r\n\r\n# 点击各个删除按钮的时候的处理逻辑\r\n# 获取哪个城市数据被删，删除数据，更新表格显示\r\ndelBtnHandle = (city_name) ->\r\n  delete aqiData[city_name]\r\n  renderAqiList()\r\n\r\ninit = ->\r\n# 在这下面给add-btn绑定一个点击事件，点击时触发addBtnHandle函数\r\n# 想办法给aqi-table中的所有删除按钮绑定事件，触发delBtnHandle函数\r\n  document.getElementById('aqi-btn').onclick = addBtnHandle\r\n  tab = document.getElementById('aqi-table')\r\n  # addEventListener的回调函数将在该对象的作用域下执行函数，\r\n  # 也只有在其作用域下才有event对象，如果回调函数不想通过匿名函数的方式传入，\r\n  # 则必须要考虑如何将其作用域传出！\r\n  tab.addEventListener('click', (event)->\r\n    if(event.target.nodeName == 'BUTTON' and event.target.innerHTML == '删除')\r\n      delBtnHandle(event.target.dataset.city)\r\n  , false)\r\n\r\n###\r\n# 原形扩展的方式去除字符串两头空格及中间空白\r\n###\r\nString::trim = ()->\r\n  this.replace(/[(^\\s+)(\\s+$)]/g, \"\")\r\n\r\ninit();\r\n"]}