{"version":3,"sources":["task15.coffee"],"names":[],"mappings":"AAUA,IAAA;;AAAA,OAAA,GAAU,SAAA;AACR,MAAA;EAAA,IAAA;;AAAQ;AAAA;SAAA,qCAAA;;mBAAA,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,SAA1B,CAAoC,CAApC,EAAuC,CAAvC,CAAD,EACN,IAAI,CAAC,iBAAiB,CAAC,SADjB;AAAA;;;AAER,SAAO;AAHC;;AAQV,WAAA,GAAc,SAAC,IAAD;SACZ,IAAI,CAAC,IAAL,CAAU,SAAC,CAAD,EAAI,CAAJ;WACR,CAAE,CAAA,CAAA,CAAF,GAAO,CAAE,CAAA,CAAA;EADD,CAAV;AADY;;AAQd,MAAA,GAAS,SAAC,IAAD;AACP,MAAA;EAAA,WAAA,GACE;IAAA,KAAA,EAAO,CAAP;IACA,IAAA,EAAM,EADN;IAEA,YAAA,EAAc,SAAC,IAAD;MACZ,IAAC,CAAA,KAAD;aACA,IAAC,CAAA,IAAD,IAAS,OAAA,GAAQ,IAAC,CAAA,KAAT,GAAe,IAAf,GAAmB,IAAK,CAAA,CAAA,CAAxB,GAA2B,SAA3B,GAAoC,IAAK,CAAA,CAAA,CAAzC,GAA4C;IAFzC,CAFd;;AAMF,OAAA,sCAAA;;IAAA,WAAW,CAAC,YAAZ,CAAyB,IAAzB;AAAA;SACA,QAAQ,CAAC,cAAT,CAAwB,QAAxB,CAAiC,CAAC,SAAlC,GAA8C,WAAW,CAAC;AATnD;;AAWT,SAAA,GAAY,SAAA;AACV,MAAA;EAAA,IAAA,GAAO,OAAA,CAAA;EACP,WAAA,CAAY,IAAZ;SACA,MAAA,CAAO,IAAP;AAHU;;AAMZ,IAAA,GAAO,SAAA;SACL,QAAQ,CAAC,cAAT,CAAwB,UAAxB,CAAmC,CAAC,OAApC,GAA8C;AADzC;;AAGP,IAAA,CAAA","file":"task15.js","sourceRoot":"/source/","sourcesContent":["# getData方法\r\n# 读取id为source的列表，获取其中城市名字及城市对应的空气质量\r\n# 返回一个数组，格式见函数中示例\r\n# Node有多种，1.Element 2.Attribute 3.Text\r\n# childNodes 将返回所有的子Node，对于ul的childNodes，很可能包含一个text类型的node（列表前面那个点），然后才是li（Element类型的Node）\r\n# children 返回的是Element类型的Node->li\r\n# firstChild 返回第一个Node，如果是text类型，要想对其进行字符串操作，需要用nodeValue去访问他的数据\r\n# firstElementChild 返回的是第一个Element类型的Node\r\n# innerHTML 返回里面的所有内容，包括text和Element\r\n# innerText 将返回所有text\r\ngetData = ->\r\n  data = ([item.firstChild.nodeValue.substring(0, 2),\r\n    item.firstElementChild.innerHTML] for item in document.getElementById(\"source\").children)\r\n  return data\r\n\r\n# sortAqiData\r\n# 按空气质量对data进行从小到大的排序\r\n# 返回一个排序后的数组\r\nsortAqiData = (data)->\r\n  data.sort((x, y)->\r\n    y[1] - x[1]\r\n  )\r\n\r\n# render\r\n# 将排好序的城市及空气质量指数,输出显示到id位resort的列表中\r\n# 格式见ul中的注释的部分\r\nrender = (data)->\r\n  listBuilder =\r\n    index: 0\r\n    list: \"\"\r\n    tryAddToList: (elem)->\r\n      @index++\r\n      @list += \"<li>第#{@index}名:#{elem[0]}; 污染指数：#{elem[1]}</li>\"\r\n\r\n  listBuilder.tryAddToList item for item in data\r\n  document.getElementById(\"resort\").innerHTML = listBuilder.list\r\n\r\nbtnHandle = ->\r\n  data = getData()\r\n  sortAqiData data\r\n  render data\r\n\r\n# 在这下面给sort-btn绑定一个点击事件，点击时触发btnHandle函数\r\ninit = ()->\r\n  document.getElementById(\"sort-btn\").onclick = btnHandle\r\n\r\ninit();"]}